<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <title>Countdown</title>
 <meta name="description" content="Countdown">
 <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=0" />
 <!--
  <link href="https://erichsia7.github.io/pwdgen2/pwaicon7/512x512.png" sizes="512x512"
    rel="apple-touch-icon-precomposed" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="defualt" />
  <link type="image/x-icon" href="https://erichsia7.github.io/pwdgen2/pwaicon7/256x256_corner_radius.ico" rel="icon" />
  <link type="image/x-icon" href="https://erichsia7.github.io/pwdgen2/pwaicon7/256x256_corner_radius.ico"
    rel="bookmark" />
  <link type="image/x-icon" href="https://erichsia7.github.io/pwdgen2/pwaicon7/256x256_corner_radius.ico"
    rel="shortcut icon" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff" kji="light">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1a1a1a" kji="dark">
  <link rel="manifest" href="https://erichsia7.github.io/pwdgen2/manifest6.json?e1">
    -->
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@200;400&display=swap" rel="stylesheet">
 <style>
  :root {
   --d-ffffff: #ffffff;
   --d-e3e3e3: #e3e3e3;
   --d-333333: #333333;
   --d-f4f4f4: #f4f4f4;
  }

  @media (prefers-color-scheme: dark) {
   :root {
    --d-ffffff: #000000;
    --d-e3e3e3: #333333;
    --d-333333: #ffffff;
    --d-f4f4f4: #1f1f1f;
   }
  }

  * {
   font-family: 'Noto Sans', sans-serif;
  }

  .title {
   position: fixed;
   top: 0px;
   left: 0px;
   width: 100%;
   height: 55px;
   background: var(--d-ffffff);
   border-bottom: 1px solid var(--d-e3e3e3);
   box-sizing: border-box;
   display: flex;
   justify-content: center;
   align-items: center;
   font-size: 20px;
   font-weight: 200;
   color: var(--d-333333);
  }

  .content_box {
   position: fixed;
   top: 55px;
   left: 0px;
   width: 100%;
   height: calc(100% - 55px);
   background: var(--d-ffffff);
   overflow: scroll;
  }

  .addcountdown {
   position: fixed;
   bottom: 20px;
   right: 20px;
   border-radius: 99em;
   background: var(--d-ffffff);
   width: 55px;
   height: 55px;
   border: 1px solid var(--d-e3e3e3);
  }

  .countdown_box {
   width: 100%;
   height: 120px;
   background: var(--d-f4f4f4);
   border-bottom: 1px solid var(--d-e3e3e3);
   position: relative;
  }

  .countdown_box_count {
   position: absolute;
   top: 0px;
   left: 0px;
   width: 119px;
   height: 120px;
   display: flex;
   justify-content: center;
   align-items: center;
   background: var(--d-ffffff);
   box-sizing: border-box;
   font-size: 23px;
   color: var(--d-333333);
  }

  .countdown_box_title {
   position: absolute;
   top: 0px;
   left: 120px;
   width: calc(100% - 120px);
   height: 49px;
   display: flex;
   align-items: center;
   background: var(--d-ffffff);
   box-sizing: border-box;
   padding-left: 10px;
   color: var(--d-333333);
  }

  .countdown_box_description {
   position: absolute;
   top: 50px;
   left: 120px;
   width: calc(100% - 120px);
   height: calc(100% - 50px);
   background: var(--d-ffffff);
   box-sizing: border-box;
   padding-left: 10px;
   padding-top: 10px;
   color: var(--d-333333);
  }

  .countdown_box.loading {
   background: var(--d-ffffff);
  }

  .countdown_box.loading .countdown_box_count::after,
  .countdown_box.loading .countdown_box_title::after,
  .countdown_box.loading .countdown_box_description::after {
   content: '';
   background: var(--d-e3e3e3);
   position: absolute;
   border-radius: 10px;
  }

  .countdown_box.loading .countdown_box_count::after {
   top: 10px;
   left: 10px;
   width: calc(100% - 20px);
   height: calc(100% - 20px);
  }

  .countdown_box.loading .countdown_box_title::after {
   top: 10px;
   left: 0px;
   width: calc(100% - 10px);
   height: calc(100% - 10px);
  }

  .countdown_box.loading .countdown_box_description::after {
   top: 10px;
   left: 0px;
   width: calc(100% - 10px);
   height: calc(100% - 20px);

  }
 </style>
</head>

<body>
 <div class="title">
  Countdown
 </div>
 <div class="content_box">

 </div>
 <div class="addcountdown"></div>
</body>
<script>
 function print_countdown() {
  var list = [
   {
    'date': 1660147200741,
    'title': 'Countdown',
    'description': '123456789',
    'id': ''
   },
   {
    'date': 1660147200741,
    'title': 'Countdown',
    'description': '123456789',
    'id': ''
   }
   ,
   {
    'date': 1658159999731,
    'title': 'Countdown',
    'description': '123456789',
    'id': ''
   },
   {
    'date': 1658154610340,
    'title': 'Countdown',
    'description': '123456789',
    'id': ''
   },
   {
    'date': 1661356800624,
    'title': 'Countdown',
    'description': '123456789',
    'id': ''
   },
   {
    'date': 1661356800624,
    'title': 'Countdown',
    'description': '123456789',
    'id': ''
   },
   {
    'date': 1661356800624,
    'title': 'Countdown',
    'description': '123456789',
    'id': ''
   },
   {
    'date': 1661356800624,
    'title': 'Countdown',
    'description': '123456789',
    'id': ''
   }
  ]
  var list_len = list.length
  for (var e = 0; e < list_len; e++) {
   var this_list = list[e]
   $('.content_box').append('<div class="countdown_box"><div class="countdown_box_count" t="' + this_list.date + '"></div><div class="countdown_box_title">' + this_list.title + '</div><div class="countdown_box_description">' + this_list.description + '</div></div>')
  }
  $('.content_box .loading').remove()
 }
 function tday(ms) {
  var sec_e = ms % 1000
  var sec = (ms - sec_e) / 1000
  var minute_e = sec % 60
  var minute = (sec - minute_e) / 60
  var hour_e = minute % 60
  var hour = (minute - hour_e) / 60
  var day_e = hour % 24
  var day = (hour - day_e) / 24
  if (day > 0) {
   return day + 'd'
  }
  if (day_e > 0) {
   return day_e + 'h'
  }
  if (hour_e > 0) {
   return hour_e + 'm'
  }
  if (minute_e > 0) {
   return minute_e + 's'
  }
  if (sec_e > 0) {
   return sec_e + 'ms'
  }
  return '--'
 }

 function countdown_update() {
  var countdown_len = $('.content_box .countdown_box').length
  for (var e = 0; e < countdown_len; e++) {
   var this_h = $('.content_box .countdown_box .countdown_box_count').eq(e)
   var thswww = this_h.offset().top - $(document).scrollTop()
   var thshh = this_h.height()
   if (thswww > (0 - thshh) && thswww < window.innerHeight && !(this_h.attr('f') === '1')) {

    var time = parseInt(this_h.attr('t'))
    var nowtime = new Date().getTime()
    var f = (time - nowtime)
    if (f > 0) {
     this_h.text(tday(f))
    }
    else {
     this_h.text('Finish')
     this_h.attr('f', '1')
    }
   }
  }
  window.requestAnimationFrame(countdown_update);
 }
 function initialize() {
  var load_len = Math.floor(window.innerHeight / 120) + 1
  var yy = []
  for (var y = 0; y < load_len; y++) {

   yy.push('<div class="countdown_box loading"><div class="countdown_box_count"></div><div class="countdown_box_title"></div><div class="countdown_box_description"></div></div>')
  }
  $('.content_box').html(yy.join(''))
  $(document).ready(function () {
   setTimeout(function () {
    print_countdown()
    window.requestAnimationFrame(countdown_update);
   }, 1500)

  })
 }
 initialize()
</script>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Countdown</title>
  <meta name="description" content="Countdown">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=0" />
  <link href="https://erichsia7.github.io/countdown/pwaicon/512x512.png" sizes="512x512"
    rel="apple-touch-icon-precomposed" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="defualt" />
  <link type="image/x-icon" href="https://erichsia7.github.io/countdown/pwaicon/256x256_corner_radius.ico" rel="icon" />
  <link type="image/x-icon" href="https://erichsia7.github.io/countdown/pwaicon/256x256_corner_radius.ico"
    rel="bookmark" />
  <link type="image/x-icon" href="https://erichsia7.github.io/countdown/pwaicon/256x256_corner_radius.ico"
    rel="shortcut icon" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff" kji="light">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0d0d0d" kji="dark">
  <link rel="manifest" href="https://erichsia7.github.io/countdown/manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@200;400&display=swap" rel="stylesheet">
  <style>
    :root {
      --d-ffffff: #ffffff;
      --d-e3e3e3: #e3e3e3;
      --d-333333: #333333;
      --d-f4f4f4: #f4f4f4;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --d-ffffff: #0d0d0d;
        --d-e3e3e3: #333333;
        --d-333333: #ffffff;
        --d-f4f4f4: #1f1f1f;
      }
    }

    * {
      -webkit-appearance: none;
      outline: none;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      font-family: 'Noto Sans', sans-serif;
    }

    body {
      background: var(--d-ffffff)
    }

    .title,
    .countdown_title,
    .add_countdown_title {
      position: fixed;
      top: 0px;
      left: 0px;
      width: 100%;
      height: 55px;
      background: var(--d-ffffff);
      border-bottom: 1px solid var(--d-e3e3e3);
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      font-weight: 200;
      color: var(--d-333333);
      -webkit-user-select: none;
      user-select: none;
    }

    .countdown_title,
    .add_countdown_title {
      display: none;
    }

    .content_box,
    .countdown_content_box,
    .add_countdown_content_box {
      position: fixed;
      top: 55px;
      left: 0px;
      width: 100%;
      height: calc(100% - 55px);
      background: var(--d-ffffff);
      overflow: scroll;
      -webkit-user-select: none;
      user-select: none;
    }

    .countdown_content_box,
    .add_countdown_content_box {
      display: none;
    }

    .addcountdown {
      position: fixed;
      bottom: 20px;
      right: 20px;
      border-radius: 99em;
      background: var(--d-e3e3e3);
      width: 55px;
      height: 55px;
      box-shadow: 0 0 15px 2px rgba(0, 0, 0, 0.08);
      -webkit-user-select: none;
      user-select: none;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .countdown_box {
      width: 100%;
      height: 120px;
      background: var(--d-f4f4f4);
      border-bottom: 1px solid var(--d-e3e3e3);
      position: relative;
      -webkit-user-select: none;
      user-select: none;
      overflow: hidden;
    }

    .countdown_box:nth-last-child(1) {
      /*border-bottom: none;*/
      margin-bottom: 20px
    }

    .countdown_box_select {
      position: absolute;
      top: 0px;
      left: 0px;
      width: 44px;
      height: 120px;
      display: none;
      justify-content: center;
      align-items: center;
      background: var(--d-ffffff);
      box-sizing: border-box;
      font-size: 23px;
      color: var(--d-333333);
      -webkit-user-select: none;
      user-select: none;
    }

    .countdown_box_count {
      position: absolute;
      top: 0px;
      left: 0px;
      width: 119px;
      height: 120px;
      display: flex;
      justify-content: center;
      align-items: center;
      background: var(--d-ffffff);
      box-sizing: border-box;
      font-size: 23px;
      color: var(--d-333333);
      -webkit-user-select: none;
      user-select: none;
    }

    .countdown_box_title {
      position: absolute;
      top: 0px;
      left: 120px;
      width: calc(100% - 120px);
      height: 49px;
      display: flex;
      align-items: center;
      background: var(--d-ffffff);
      box-sizing: border-box;
      padding: 10px;
      color: var(--d-333333);
      -webkit-user-select: none;
      user-select: none;
      word-break: break-all;
      overflow: hidden;
    }

    .countdown_box_description {
      position: absolute;
      top: 50px;
      left: 120px;
      width: calc(100% - 120px);
      height: calc(100% - 50px);
      background: var(--d-ffffff);
      box-sizing: border-box;
      padding: 10px;
      color: var(--d-333333);
      -webkit-user-select: none;
      user-select: none;
      word-break: break-all;
      overflow: hidden;
      white-space: pre-line;
    }

    .countdown_box.loading {
      background: var(--d-ffffff);
    }

    .countdown_box.loading .countdown_box_count::after,
    .countdown_box.loading .countdown_box_title::after,
    .countdown_box.loading .countdown_box_description::after {
      content: '';
      background: var(--d-e3e3e3);
      position: absolute;
      border-radius: 10px;
    }

    .countdown_box.loading .countdown_box_count::after {
      top: 10px;
      left: 10px;
      width: calc(100% - 20px);
      height: calc(100% - 20px);
    }

    .countdown_box.loading .countdown_box_title::after {
      top: 10px;
      left: 0px;
      width: calc(100% - 10px);
      height: calc(100% - 10px);
    }

    .countdown_box.loading .countdown_box_description::after {
      top: 10px;
      left: 0px;
      width: calc(100% - 10px);
      height: calc(100% - 20px);

    }

    .content_box[edit="1"] .countdown_box .countdown_box_count,
    .content_box[edit="1"] .countdown_box .countdown_box_title,
    .content_box[edit="1"] .countdown_box .countdown_box_description {
      transform: translateX(45px);
      opacity: 0.6;
    }

    .content_box[edit="1"] .countdown_box_select {
      display: flex;
    }

    .add_countdown_content_box input[type="text"],
    .add_countdown_content_box textarea {
      width: calc(100% - 20px);
      height: 45px;
      border: 1px solid var(--d-e3e3e3);
      border-radius: 10px;
      background: transparent;
      -webkit-appearance: none;
      color: var(--d-333333);
      font-size: 15px;
      margin-top: 10px;
      box-sizing: border-box;
      padding: 5px;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      background: transparent;
      color: var(--d-333333);
    }

    .add_countdown_content_box input[type="datetime-local"] {
      -webkit-appearance: none;
      width: calc(100% - 20px);
      height: 45px;
      padding: 5px;
      box-sizing: border-box;
      margin-top: 10px;
      font-size: 15px;
      border-radius: 10px;
      border: 1px solid var(--d-e3e3e3);
      background: transparent;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      color: var(--d-333333)
    }

    .add_countdown_content_box textarea {
      height: 135px;
    }

    .add_countdown_btn {
      height: 45px;
      width: calc(100% - 20px);
      background: var(--d-e3e3e3);
      color: var(--d-333333);
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 10px;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      margin-top: 10px;
    }


    .promptcenter {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--d-333333);
      font-size: 15px;
      font-family: "Noto Sans TC", sans-serif;
      user-select: none;
      -webkit-user-select: none;
    }

    .promptcenter * {
      color: var(--d-333333);
      font-size: 15px;
      font-family: "Noto Sans TC", sans-serif
    }

    .prompt {
      width: clamp(180px, calc(100% - 40px), 450px);
      height: 60px;
      border-radius: 15px;
      position: fixed;
      left: 50%;
      bottom: 0px;
      opacity: 0;
      transform: translateX(-50%) translateY(0px) scale(0.75);
      background: var(--d-e3e3e3);
      box-shadow: 0 0 15px 2px rgba(0, 0, 0, 0.08);
      will-change: transform, opacity;
      -webkit-user-select: none;
      user-select: none;
    }

    .back_btn,
    .options_btn {
      width: 35px;
      height: 35px;
      position: absolute;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .back_btn {
      top: 10px;
      left: 10px;
    }

    .options_btn {
      top: 10px;
      right: 10px;
    }

    .addcountdown svg,
    .back_btn svg,
    .options_btn svg {
      width: 20px;
      height: 20px
    }

    .countdown_content_box_count {
      width: calc(100% - 20px);
      height: 250px;
      position: absolute;
      top: 10px;
      left: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      color: var(--d-333333);
    }

    .countdown_content_box_count span {
      font-size: 20px;
      padding: 5px;
    }

    .countdown_content_box_line {
      width: calc(100% - 20px);
      height: 1px;
      background: var(--d-e3e3e3);
      position: absolute;
      top: calc(10px + 250px + 5px);
      left: 10px;
    }

    .countdown_content_box_details {
      width: calc(100% - 20px);
      height: auto;
      display: inline-block;
      position: absolute;
      top: calc(10px + 250px + 5px + 1px + 5px);
      left: 10px;
      color: var(--d-333333);
    }

    .countdown_content_box_details h3,
    .countdown_content_box_details p {
      margin: 5px;
      padding: 0px;
      color: var(--d-333333);
      word-break: break-all;
      white-space: pre-line;
    }

    .options_mask {
      position: fixed;
      top: 0px;
      left: 0px;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
    }

    .options {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: clamp(200px, 90%, 450px);
      height: auto;
      min-height: 120px;
      display: none;
      background: var(--d-ffffff);
      border-radius: 10px;
      overflow: scroll;
      -webkit-mask-image: -webkit-radial-gradient(white, black);
      mask-image: -webkit-radial-gradient(white, black);
      max-height: 450px;
    }

    .options li {
      width: 100%;
      padding-left: 10px;
      height: 45px;
      border-bottom: 1px solid var(--d-e3e3e3);
      box-sizing: border-box;
      color: var(--d-333333);
      font-size: 16px;
      display: flex;
      align-items: center;
    }

    .options li:nth-last-child(1) {
      border: none;
    }
  </style>
</head>

<body>
  <div class="title">
    Countdown
    <div class="options_btn" r-click="openoptions()">
      <svg stroke-miterlimit="10"
        style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1"
        viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <path
          d="M4.8 36.8C3.46667 36.8 2.33333 36.3333 1.4 35.4C0.466666 34.4667-6.35783e-07 33.3333 7.10543e-15 32C7.10543e-15 30.6667 0.466667 29.5333 1.4 28.6C2.33333 27.6667 3.46667 27.2 4.8 27.2C6.13333 27.2 7.26667 27.6667 8.2 28.6C9.13333 29.5333 9.6 30.6667 9.6 32C9.6 33.3333 9.13333 34.4667 8.2 35.4C7.26667 36.3333 6.13333 36.8 4.8 36.8ZM32 36.8C30.6667 36.8 29.5333 36.3333 28.6 35.4C27.6667 34.4667 27.2 33.3333 27.2 32C27.2 30.6667 27.6667 29.5333 28.6 28.6C29.5333 27.6667 30.6667 27.2 32 27.2C33.3333 27.2 34.4667 27.6667 35.4 28.6C36.3333 29.5333 36.8 30.6667 36.8 32C36.8 33.3333 36.3333 34.4667 35.4 35.4C34.4667 36.3333 33.3333 36.8 32 36.8ZM59.2 36.8C57.8667 36.8 56.7333 36.3333 55.8 35.4C54.8667 34.4667 54.4 33.3333 54.4 32C54.4 30.6667 54.8667 29.5333 55.8 28.6C56.7333 27.6667 57.8667 27.2 59.2 27.2C60.5333 27.2 61.6667 27.6667 62.6 28.6C63.5333 29.5333 64 30.6667 64 32C64 33.3333 63.5333 34.4667 62.6 35.4C61.6667 36.3333 60.5333 36.8 59.2 36.8Z"
          fill="var(--d-333333)" fill-rule="evenodd" opacity="1" stroke="none" />
      </svg>
    </div>
  </div>
  <div class="content_box"></div>
  <div class="addcountdown" r-click="openaddcountdown()">
    <svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;"
      version="1.1" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink">
      <path
        d="M28.5714 64L28.5714 35.4286L0 35.4286L0 28.5714L28.5714 28.5714L28.5714 0L35.4286 0L35.4286 28.5714L64 28.5714L64 35.4286L35.4286 35.4286L35.4286 64L28.5714 64Z"
        fill="var(--d-333333)" fill-rule="evenodd" opacity="1" stroke="none" />
    </svg>
  </div>
  <div class="countdown_title">
    <div class="back_btn" r-click="closecountdown()">
      <svg stroke-miterlimit="10"
        style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1"
        viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M32 64L0 32L32 0L36.2 4.2L11.4 29L64 29L64 35L11.4 35L36.2 59.8L32 64Z" fill="var(--d-333333)"
          fill-rule="evenodd" opacity="1" stroke="none" />
      </svg>
    </div>
    <span id="countdown_title_text"></span>
  </div>
  <div class="countdown_content_box">
    <div class="countdown_content_box_count"></div>
    <div class="countdown_content_box_line"></div>
    <div class="countdown_content_box_details">
      <h3 id="countdown_content_box_details_title"></h3>
      <p id="countdown_content_box_details_description"></p>
      <p id="countdown_content_box_details_date"></p>
    </div>

  </div>
  <div class="add_countdown_title">
    <div class="back_btn" r-click="closeaddcountdown()">
      <svg stroke-miterlimit="10"
        style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1"
        viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M32 64L0 32L32 0L36.2 4.2L11.4 29L64 29L64 35L11.4 35L36.2 59.8L32 64Z" fill="var(--d-333333)"
          fill-rule="evenodd" opacity="1" stroke="none" />
      </svg>
    </div>
    Add Countdown
  </div>
  <div class="add_countdown_content_box">
    <input type="text" placeholder="Title" id="add_title">
    <textarea placeholder="Description" id="add_description"></textarea>
    <input type="datetime-local" id="add_date" placeholder="Date">
    <div class="add_countdown_btn" r-click="addcountdown()">Add</div>
  </div>

  <div class="options_mask" r-click="closeoptions()"></div>
  <div class="options">
    <li r-click="refreshpage()" y="refresh">Refresh</li>
  </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  var getUrlString = location.href;
  var url = new URL(getUrlString);
  function urlparams(p) {
    return url.searchParams.get(p)
  }
  (function ($) {
    $.fn.prompt = function (options) {
      var settings = $.extend(
        {
          message: "undefined",
          time: 2000,
        },
        options
      );

      return this.each(function () {
        $('.prompt,style[promptanimation="promptanimation"]').remove();
        var promptchars = "0123456789abcdefghijklmnopqrstuvwxyz";
        var promptid = "";
        for (var i = 0; i < 10; i++) {
          var randomNumber = Math.floor(Math.random() * promptchars.length);
          promptid += promptchars.substring(randomNumber, randomNumber + 1);
        }
        var translateY = -1 * (20)
        $(this).append('<style qix="promptanimation' + promptid + '" promptanimation="promptanimation">.promptanimation' + promptid + '{animation-name:prompt' + promptid + ';animation-duration:' + (settings.time + 300 * 2) + 'ms;animation-fill-mode:forwards;animation-timing-function:ease-in-out}@keyframes prompt' + promptid + '{0%{opacity:0;transform:translateX(-50%) translateY(' + translateY + 'px) scale(0.75);}' + Math.floor((300) / (settings.time + 300 + 150) * 100) + '%{opacity:1;transform:translateX(-50%) translateY(' + translateY + 'px) scale(1);}' + Math.floor((300 + settings.time) / (settings.time + 300 + 150) * 100) + '%{opacity:1;transform:translateX(-50%) translateY(' + translateY + 'px) scale(1);}100%{opacity:0;transform:translateX(-50%) translateY(' + translateY + 'px) scale(1);}}</style><div class="prompt promptanimation' + promptid + '" id="' + promptid + '"><span class="promptcenter">' + settings.message + "</span></div>");

        setTimeout(function () {
          $("#" + promptid + ',style[qix="promptanimation' + promptid + '"]').remove();
        }, settings.time + 400 * 2 + 50);
      });
    };
  })(jQuery);
  function mes(mess) {
    $('body').prompt({ 'message': mess, 'time': 1200 });
  }
  function randid(n) {
    var genidchars = "0123456789abcdefghijklmnopqrstuvwxyz";
    var genid = "";
    for (var i = 0; i < 16; i++) {
      var genrandomNumber = Math.floor(Math.random() * genidchars.length);
      genid += genidchars.substring(genrandomNumber, genrandomNumber + 1);
    }
    if (!(n === undefined)) {
      n = n.replaceAll('_', '-')
      return n + '-' + genid + '' + new Date().getTime();
    }
    return genid + '' + new Date().getTime();
  }
  function rclick(select) {
    $(select).click(function (e) {
      e.stopPropagation()
      if ($(this).attr('r-click') != '') {
        eval('setTimeout(function() {' + $(this).attr('r-click') + '},' + 1 + ');');
      }
    });
  }
  function searchItemsbyname(name) {
    var gh = []
    for (var t in window.localStorage) {
      if (String(t).indexOf(name) > -1) {
        gh.push(t)
      }
    }
    return gh
  }
  function print_countdown() {
    var list = searchItemsbyname('countdown_x_')
    if (list.length < 1) {
      $('.content_box .loading').remove()
      return ''
    }
    var list_len = list.length
    for (var d = 0; d < list_len; d++) {
      list[d] = JSON.parse(localStorage.getItem(String(list[d])))
    }
    list_len = list.length
    for (var e = 0; e < list_len; e++) {
      var this_list = list[e]
      var this_title = this_list.title
      if (this_title.length > 15) {
        this_title = String(this_title).substring(0, 12) + '...'
      }
      var this_description = this_list.description
      if (this_description.length > 45) {
        this_description = String(this_description).substring(0, 42) + '...'
      }

      var this_id = randid('countdown')
      $('.content_box').append('<div class="countdown_box" id="' + this_id + '" r-click="opencountdown(' + "'" + this_list.id + "'" + ')"><div class="countdown_box_select"></div><div class="countdown_box_count" t="' + this_list.date + '"></div><div class="countdown_box_title">' + this_title + '</div><div class="countdown_box_description">' + this_description + '</div></div>')
      rclick('#' + this_id)
    }
    $('.content_box .loading').remove()
  }
  function refresh_countdown() {
    $('.content_box').html('')
    print_countdown()
  }
  function check_i(i) {
    if (i < 10) {
      return '0' + i
    }
    else {
      return i
    }
  }
  function tday(ms, mode) {
    var sec_e = ms % 1000
    var sec = (ms - sec_e) / 1000
    var minute_e = sec % 60
    var minute = (sec - minute_e) / 60
    var hour_e = minute % 60
    var hour = (minute - hour_e) / 60
    var day_e = hour % 24
    var day = (hour - day_e) / 24
    var week_e = day % 7
    var week = (day - week_e) / 7
    if (mode === 0) {
      if (week > 0) {
        return week + 'w'
      }
      if (week_e > 0) {
        return week_e + 'd'
      }
      if (day_e > 0) {
        return day_e + 'h'
      }
      if (hour_e > 0) {
        return hour_e + 'm'
      }
      if (minute_e > 0) {
        return minute_e + 's'
      }
      if (sec_e > 0) {
        return sec_e + 'ms'
      }
      return '--'
    }
    if (mode === 1) {
      var return_arr = []
      if (week > 0) {
        return_arr.push(week + 'week')
      }
      if (week_e > 0) {
        return_arr.push(week_e + 'day')
      }
      if (day_e > 0) {
        return_arr.push(day_e + 'hour')
      }
      if (hour_e > 0) {
        return_arr.push(hour_e + 'minute')
      }
      if (minute_e > 0) {
        return_arr.push(minute_e + 'sec')
      }
      if (sec_e > 0) {
        return_arr.push(sec_e + 'ms')
      }
      return return_arr
    }
  }
  var countdown_pause = 0
  function countdown_update() {
    var countdown_len = $('.content_box .countdown_box').length
    for (var e = 0; e < countdown_len; e++) {
      var this_h = $('.content_box .countdown_box .countdown_box_count').eq(e)
      var thswww = this_h.offset().top - $(document).scrollTop()
      var thshh = this_h.height()
      if (thswww > (0 - thshh) && thswww < window.innerHeight && !(this_h.attr('f') === '1')) {

        var time = parseInt(this_h.attr('t'))
        var nowtime = new Date().getTime()
        var f = (time - nowtime)
        if (f > 0) {
          this_h.text(tday(f, 0))
        }
        else {
          this_h.text('Finish')
          this_h.attr('f', '1')
        }
      }
    }
    if (countdown_pause === 0) {
      window.requestAnimationFrame(countdown_update);
    }
    else {
      countdown_pause = 0
      return ''
    }
  }
  function openaddcountdown() {
    $('.add_countdown_title').css({ 'display': 'flex' })
    $('.add_countdown_content_box').css({ 'display': 'block' })
    $('#add_title').val('')
    $('#add_description').val('')
    $('#add_date').val('')
  }
  function closeaddcountdown() {
    $('.add_countdown_title,.add_countdown_content_box').css({ 'display': 'none' })
  }
  function addcountdown() {
    var title = $('#add_title').val()
    var description = $('#add_description').val()
    var date = new Date(String($('#add_date').val())).getTime()
    var id = ''
    var id_chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'
    for (var i = 0; i < 16; i++) {
      var rdn = Math.floor(Math.random() * id_chars.length)
      var rdnstr = id_chars.substring(rdn, rdn + 1)
      id += rdnstr
    }
    var json = {
      'title': title,
      'description': description,
      'date': date,
      'id': id
    }
    localStorage.setItem('countdown_x_' + id, JSON.stringify(json))
    closeaddcountdown()
    $('#add_title').val('')
    $('#add_description').val('')
    $('#add_date').val('')
    mes('Countdown added')
    refresh_countdown()
  }
  function countdown_content_count_update() {
    if (!($('.countdown_content_box_count').attr('f') === '1')) {
      var time = parseInt($('.countdown_content_box_count').attr('t'))
      var nowtime = new Date().getTime()
      var f = (time - nowtime)
      if (f > 0) {
        $('.countdown_content_box_count').html('<span>' + (tday(f, 1)).join('</span><span>') + '</span>')
        window.requestAnimationFrame(countdown_content_count_update);
      }
      else {
        $('.countdown_content_box_count').html('<span>Finish</span>').attr('f', '1')
      }
    }
  }
  function opencountdown(countdown_id) {
    if ($('.content_box').attr('edit') === '1') {
      return ''
    }
    if (localStorage.hasOwnProperty('countdown_x_' + countdown_id)) {
      countdown_pause = 1
      history.pushState(null, null, 'https://erichsia7.github.io/countdown/?c=1&id=' + countdown_id);
      var countdown_json = JSON.parse(String(localStorage.getItem('countdown_x_' + countdown_id)))
      var date_o = new Date()
      date_o.setTime(parseInt(countdown_json.date))
      var date_str = ([date_o.getFullYear(), check_i(date_o.getMonth() + 1), check_i(date_o.getDate())]).join('/') + ' ' + ([check_i(date_o.getHours()), check_i(date_o.getMinutes()), check_i(date_o.getSeconds())]).join(':')
      $('.countdown_title').css({ 'display': 'flex' })
      $('.countdown_content_box').css({ 'display': 'block' })
      var t_title = countdown_json.title
      if (t_title.length > 15) {
        t_title = String(t_title).substring(0, 12) + '...'
      }
      $('#countdown_title_text').text(t_title)
      $('.countdown_content_box_count').attr('t', countdown_json.date).attr('f', '0')
      $('.countdown_content_box_details #countdown_content_box_details_title').text(countdown_json.title)
      $('.countdown_content_box_details #countdown_content_box_details_description').text(countdown_json.description)
      $('.countdown_content_box_details #countdown_content_box_details_date').text(date_str)
      window.requestAnimationFrame(countdown_content_count_update);
    }
  }
  function closecountdown() {
    $('.countdown_title,.countdown_content_box').css({ 'display': 'none' })
    $('.countdown_content_box_count').attr('f', '1')
    history.pushState(null, null, 'https://erichsia7.github.io/countdown/');
    window.requestAnimationFrame(countdown_update);
  }
  function openoptions() {
    $('.options_mask').css({ 'display': 'block' })
    $('.options').css({ 'display': 'inline-block' })
  }
  function closeoptions() {
    $('.options_mask,.options').css({ 'display': 'none' })
  }
  function refreshpage() {
    location.replace('https://erichsia7.github.io/countdown/?' + randid())
  }

  function initialize() {
    var load_len = Math.floor(window.innerHeight / 120) + 1
    var yy = []
    for (var y = 0; y < load_len; y++) {
      yy.push('<div class="countdown_box loading"><div class="countdown_box_count"></div><div class="countdown_box_title"></div><div class="countdown_box_description"></div></div>')
    }
    $('.content_box').html(yy.join(''))
    $(document).ready(function () {
      setTimeout(function () {
        print_countdown()
        rclick('.addcountdown,.add_countdown_btn,.back_btn,.options_btn,.options_mask,.options li')
        window.requestAnimationFrame(countdown_update);
      }, 1500)
      if (urlparams('c') === '1') {
        var countdown_id = urlparams('id')
        if (localStorage.hasOwnProperty('countdown_x_' + countdown_id)) {
          opencountdown(countdown_id)
        }
      }
    })
  }
  initialize()
</script>

</html>